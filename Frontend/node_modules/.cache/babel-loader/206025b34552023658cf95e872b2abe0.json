{"ast":null,"code":"import _slicedToArray from \"D:\\\\DAChuyenNganh\\\\Libraly-System\\\\MERN-libraly-online\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"D:\\\\DAChuyenNganh\\\\Libraly-System\\\\MERN-libraly-online\\\\Frontend\\\\src\\\\components\\\\admin\\\\UpdateUser.js\";\nimport React, { Fragment, useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { USER_ADMIN_UPDATE_RESET } from '../../redux/actions/actionsTypes';\nimport { clearErrors } from '../../redux/actions/books/bookActions';\nimport { getUserDetails, updateUserAdmin } from '../../redux/actions/users/userAction';\nimport Sidebar from './Sidebar';\nvar UpdateUserAdmin = function UpdateUserAdmin() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    username = _useState2[0],\n    setUserName = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    email = _useState4[0],\n    setEmail = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    permission = _useState6[0],\n    setPermission = _useState6[1];\n  var history = useNavigate();\n  var dispatch = useDispatch();\n  var _useSelector = useSelector(function (state) {\n      return state.user;\n    }),\n    error = _useSelector.error,\n    isUpdated = _useSelector.isUpdated;\n  var _useSelector2 = useSelector(function (state) {\n      return state.userDetails;\n    }),\n    user = _useSelector2.user;\n  var _useParams = useParams(),\n    id = _useParams.id;\n  useEffect(function () {\n    console.log(user && user._id !== id);\n    if (user && user._id !== id) {\n      dispatch(getUserDetails(id));\n    } else {\n      setUserName(user.name);\n      setEmail(user.email);\n      setPermission(user.permission);\n    }\n    if (error) {\n      alert(error);\n      dispatch(clearErrors());\n    }\n    if (isUpdated) {\n      alert('User updated successfully');\n      history('/admin/users');\n      dispatch({\n        type: USER_ADMIN_UPDATE_RESET\n      });\n    }\n  }, [dispatch, alert, error, history, isUpdated, id, user]);\n  var submitHandler = function submitHandler(e) {\n    e.preventDefault();\n    var formData = new FormData();\n    formData.set('name', username);\n    formData.set('email', email);\n    formData.set('permission', permission);\n    dispatch(updateUserAdmin(user._id, formData));\n  };\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-md-2 mt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-md-10 mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row wrapper\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-10 col-lg-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"shadow-lg\",\n    onSubmit: submitHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"mt-2 mb-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, \"Update User\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name_field\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 10\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"name\",\n    id: \"name_field\",\n    className: \"form-control\",\n    name: \"name\",\n    value: username,\n    onChange: function onChange(e) {\n      return setUserName(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email_field\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 10\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    id: \"email_field\",\n    className: \"form-control\",\n    name: \"email\",\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"role_field\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 10\n    }\n  }, \"Permission\"), /*#__PURE__*/React.createElement(\"select\", {\n    id: \"role_field\",\n    className: \"form-control\",\n    name: \"role\",\n    value: permission,\n    onChange: function onChange(e) {\n      return setPermission(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"user\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, \"user\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"admin\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"admin\"))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn update-btn btn-block mt-4 mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, \"Update\")))))));\n};\nexport default UpdateUserAdmin;","map":{"version":3,"names":["React","Fragment","useState","useEffect","useDispatch","useSelector","useNavigate","useParams","USER_ADMIN_UPDATE_RESET","clearErrors","getUserDetails","updateUserAdmin","Sidebar","UpdateUserAdmin","username","setUserName","email","setEmail","permission","setPermission","history","dispatch","state","user","error","isUpdated","userDetails","id","console","log","_id","name","alert","type","submitHandler","e","preventDefault","formData","FormData","set","target","value"],"sources":["D:/DAChuyenNganh/Libraly-System/MERN-libraly-online/Frontend/src/components/admin/UpdateUser.js"],"sourcesContent":["import React, { Fragment, useState, useEffect } from 'react'\n\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { USER_ADMIN_UPDATE_RESET } from '../../redux/actions/actionsTypes'\nimport { clearErrors } from '../../redux/actions/books/bookActions'\nimport { getUserDetails, updateUserAdmin } from '../../redux/actions/users/userAction'\nimport Sidebar from './Sidebar'\n\nconst UpdateUserAdmin = () => {\n\n\n\tconst [username, setUserName] = useState('')\n\tconst [email, setEmail] = useState('')\n\tconst [permission, setPermission] = useState('')\n\n\tconst history = useNavigate();\n\tconst dispatch = useDispatch();\n\n\tconst { error, isUpdated } = useSelector(state => state.user);\n\tconst { user } = useSelector((state) => state.userDetails)\n\n\tconst {id} = useParams();\n\n\tuseEffect(() => {\n\n\t\tconsole.log(user && user._id !== id);\n\t\tif (user && user._id !== id) {\n\t\t\tdispatch(getUserDetails(id))\n\t\t} else {\n\t\t\tsetUserName(user.name);\n\t\t\tsetEmail(user.email);\n\t\t\tsetPermission(user.permission);\n\t\t}\n\n\t\tif (error) {\n\t\t\talert(error);\n\t\t\tdispatch(clearErrors());\n\t\t}\n\n\t\tif (isUpdated) {\n\t\t\talert('User updated successfully')\n\t\t\thistory('/admin/users')\n\n\t\t\tdispatch({\n\t\t\t\ttype: USER_ADMIN_UPDATE_RESET\n\t\t\t})\n\t\t}\n\n\t}, [dispatch, alert, error, history, isUpdated, id, user])\n\n\tconst submitHandler = (e) => {\n\t\te.preventDefault();\n\n\t\tconst formData = new FormData();\n\t\tformData.set('name', username);\n\t\tformData.set('email', email);\n\t\tformData.set('permission', permission);\n\n\t\tdispatch(updateUserAdmin(user._id, formData))\n\t}\n\n\n\treturn (\n\t\t<Fragment>\t\n\t\t\t<div className=\"row mt-5\">\n\t\t\t\t<div className=\"col-12 col-md-2 mt-4\">\n\t\t\t\t\t<Sidebar />\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"col-12 col-md-10 mt-5\">\n\t\t\t\t\t<div className=\"row wrapper\">\n\t\t\t\t\t\t<div className=\"col-10 col-lg-5\">\n\t\t\t\t\t\t\t<form className=\"shadow-lg\" onSubmit={submitHandler}>\n\t\t\t\t\t\t\t\t<h1 className=\"mt-2 mb-5\">Update User</h1>\n\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"name_field\">Name</label>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"name\"\n\t\t\t\t\t\t\t\t\t\tid=\"name_field\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\t\t\tvalue={username}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setUserName(e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"email_field\">Email</label>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\t\tid=\"email_field\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"form-group\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"role_field\">Permission</label>\n\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tid=\"role_field\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\t\t\tname='role'\n\t\t\t\t\t\t\t\t\t\tvalue={permission}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setPermission(e.target.value)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value=\"user\">user</option>\n\t\t\t\t\t\t\t\t\t\t<option value=\"admin\">admin</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"btn update-btn btn-block mt-4 mb-3\" >Update</button>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</Fragment>\n\t)\n}\n\nexport default UpdateUserAdmin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from \"D:\\\\DAChuyenNganh\\\\Libraly-System\\\\Libraly-System\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"D:\\\\DAChuyenNganh\\\\Libraly-System\\\\Libraly-System\\\\Frontend\\\\src\\\\components\\\\Books\\\\BookDetail.js\";\nimport React, { useEffect, useState, Fragment } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { clearErrors, fetchBook, fetchBooks, updateBook } from '../../redux/actions/books/bookActions';\nimport { addItemToCallCart } from '../../redux/actions/callcard/callCardAction';\nimport Loader from \"../../layout/Loader\";\nimport Moment from 'moment';\nimport { Carousel } from \"react-bootstrap\";\nvar BookDetail = function BookDetail() {\n  var _useParams = useParams(),\n    id = _useParams.id;\n  var history = useNavigate();\n\n  //Get the book details and fill it in the form\n  var _useSelector = useSelector(function (state) {\n      return state.bookDetails;\n    }),\n    loading = _useSelector.loading,\n    error = _useSelector.error,\n    book = _useSelector.book;\n  var _useState = useState(1),\n    _useState2 = _slicedToArray(_useState, 2),\n    quantity = _useState2[0],\n    setQuantity = _useState2[1];\n  var dispatch = useDispatch();\n  //\n\n  useEffect(function () {\n    dispatch(fetchBook(id));\n    dispatch(fetchBooks());\n    if (error) {\n      alert(error);\n      dispatch(clearErrors());\n    }\n  }, [dispatch, error, id]);\n  //add to call card\n  var addToCallCart = function addToCallCart() {\n    dispatch(addItemToCallCart(id, quantity));\n    alert(\"Item Added to Call Cart\");\n  };\n  //set quantity\n  var increaseQty = function increaseQty() {\n    var count = document.querySelector(\".count\");\n    if (count.valueAsNumber >= book.stock) return;\n    var qty = count.valueAsNumber + 1;\n    setQuantity(qty);\n  };\n  //\n  var decreaseQty = function decreaseQty() {\n    var count = document.querySelector(\".count\");\n    if (count.valueAsNumber <= 1) return;\n    var qty = count.valueAsNumber - 1;\n    setQuantity(qty);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, loading && /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }), book !== undefined && book.length === 0 ? 'No' : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-hover\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 37\n    }\n  }, \"Book Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 37\n    }\n  }, \"publishedDate\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 37\n    }\n  }, \"genres\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 37\n    }\n  }, \"unitPrice\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 37\n    }\n  }, \"Book image\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 37\n    }\n  }, \"Action\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 37\n    }\n  }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }, book && book.map(function (book) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: book._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      scope: \"row\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 49\n      }\n    }, book.book_name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 49\n      }\n    }, Moment(book.publishedDate).calendar()), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 49\n      }\n    }, book.genres), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 49\n      }\n    }, book.unitPrice.toLocaleString('it-IT', {\n      style: 'currency',\n      currency: 'VND'\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      key: book.book_img.public_id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: book.book_img.url,\n      style: {\n        height: '350px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 53\n      }\n    })));\n  }))))));\n};\nexport default BookDetail;","map":{"version":3,"names":["React","useEffect","useState","Fragment","useParams","useNavigate","useDispatch","useSelector","clearErrors","fetchBook","fetchBooks","updateBook","addItemToCallCart","Loader","Moment","Carousel","BookDetail","id","history","state","bookDetails","loading","error","book","quantity","setQuantity","dispatch","alert","addToCallCart","increaseQty","count","document","querySelector","valueAsNumber","stock","qty","decreaseQty","undefined","length","map","_id","book_name","publishedDate","calendar","genres","unitPrice","toLocaleString","style","currency","book_img","public_id","url","height"],"sources":["D:/DAChuyenNganh/Libraly-System/Libraly-System/Frontend/src/components/Books/BookDetail.js"],"sourcesContent":["import React, { useEffect, useState, Fragment } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { clearErrors, fetchBook, fetchBooks, updateBook } from '../../redux/actions/books/bookActions';\r\nimport { addItemToCallCart } from '../../redux/actions/callcard/callCardAction';\r\nimport Loader from \"../../layout/Loader\";\r\nimport Moment from 'moment';\r\n\r\nimport { Carousel } from \"react-bootstrap\";\r\n\r\nconst BookDetail = () => {\r\n    const { id } = useParams();\r\n    const history = useNavigate();\r\n\r\n    //Get the book details and fill it in the form\r\n    const { loading, error, book } = useSelector((state) => state.bookDetails);\r\n\r\n    const [quantity, setQuantity] = useState(1);\r\n\r\n    const dispatch = useDispatch();\r\n    //\r\n\r\n    useEffect(() => {\r\n        dispatch(fetchBook(id));\r\n        dispatch(fetchBooks());\r\n\r\n        if (error) {\r\n            alert(error);\r\n            dispatch(clearErrors());\r\n        }\r\n    }, [dispatch, error, id]);\r\n    //add to call card\r\n    const addToCallCart = () => {\r\n        dispatch(addItemToCallCart(id, quantity));\r\n        alert(\"Item Added to Call Cart\");\r\n    };\r\n    //set quantity\r\n    const increaseQty = () => {\r\n        const count = document.querySelector(\".count\");\r\n\r\n        if (count.valueAsNumber >= book.stock) return;\r\n\r\n        const qty = count.valueAsNumber + 1;\r\n        setQuantity(qty);\r\n    };\r\n    //\r\n    const decreaseQty = () => {\r\n        const count = document.querySelector(\".count\");\r\n\r\n        if (count.valueAsNumber <= 1) return;\r\n\r\n        const qty = count.valueAsNumber - 1;\r\n        setQuantity(qty);\r\n    };\r\n\r\n\r\n    return (\r\n        <div>\r\n            {loading && <Loader />}\r\n            {book !== undefined && book.length === 0 ? (\r\n                'No'\r\n            ) : (\r\n                <div className='row'>\r\n                    <div className='col'>\r\n                        <table className='table table-hover'>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th scope='col'>Book Name</th>\r\n                                    <th scope='col'>publishedDate</th>\r\n                                    <th scope='col'>genres</th>\r\n                                    {/* <th scope='col'>Author</th> */}\r\n                                    <th scope='col'>unitPrice</th>\r\n                                    <th scope='col'>Book image</th>\r\n                                    <th scope='col'>Action</th>\r\n                                    <th scope='col'>Action</th>\r\n\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {book &&\r\n                                    book.map(book => {\r\n                                        return (\r\n                                            <tr key={book._id}>\r\n                                                <th scope='row'>{book.book_name}</th>\r\n                                                <td>{Moment(book.publishedDate).calendar()}</td>\r\n                                                <td>{book.genres}</td>\r\n                                                {/* <td>{book.author}</td> */}\r\n                                                <td>{book.unitPrice.toLocaleString('it-IT', { style: 'currency', currency: 'VND' })}</td>\r\n                                                <td key={book.book_img.public_id}>\r\n                                                \r\n                                                    <img src={book.book_img.url} style={{ height: '350px' }} />\r\n                                                </td>\r\n                                                \r\n\r\n                                            </tr>\r\n                                        );\r\n                                    })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookDetail;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
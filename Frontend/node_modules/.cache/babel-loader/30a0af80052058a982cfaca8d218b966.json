{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"D:\\\\DAChuyenNganh\\\\Libraly-System\\\\MERN-libraly-online\\\\Frontend\\\\src\\\\components\\\\Authors\\\\ListAuthors.js\";\nimport React, { Fragment, useEffect } from \"react\";\nimport { MDBDataTable } from \"mdbreact\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Sidebar from \"../admin/Sidebar\";\nimport Loader from \"../layout/Loader\";\nimport { dltAuthor, fetchAuthors } from \"../../redux/actions/author/authorActions\";\nimport { DELETE_AUTHOR_RESET } from \"../../redux/actions/actionsTypes\";\nimport { clearErrors } from \"../../redux/actions/books/bookActions\";\nvar ListAuthors = function ListAuthors() {\n  var history = useNavigate();\n  var dispatch = useDispatch();\n  var authorsList = useSelector(function (state) {\n    return state.authorsList;\n  });\n  var authors = authorsList.authors,\n    loading = authorsList.loading,\n    error = authorsList.error;\n  var _useSelector = useSelector(function (state) {\n      return state.dltAuthor;\n    }),\n    deleteError = _useSelector.error,\n    isDeleted = _useSelector.isDeleted;\n  useEffect(function () {\n    dispatch(fetchAuthors());\n    if (error) {\n      alert(error);\n      dispatch(clearErrors());\n    }\n    if (deleteError) {\n      alert(deleteError);\n      dispatch(clearErrors());\n    }\n    if (isDeleted) {\n      alert.success(\"Author deleted successfully\");\n      history(\"/listAuthor\");\n      dispatch({\n        type: DELETE_AUTHOR_RESET\n      });\n    }\n  }, [dispatch, alert, error, deleteError, isDeleted, history]);\n  var setAuthors = function setAuthors() {\n    var data = {\n      columns: [{\n        label: \"ID\",\n        field: \"id\",\n        sort: \"asc\"\n      }, {\n        label: \"Name\",\n        field: \"name\",\n        sort: \"asc\"\n      }, {\n        label: \"Year\",\n        field: \"year\",\n        sort: \"asc\"\n      }, {\n        label: \"Action\",\n        field: \"actions\"\n      }],\n      rows: []\n    };\n    authors.forEach(function (author) {\n      data.rows.push({\n        id: author._id,\n        name: author.name,\n        year: author.year,\n        actions: /*#__PURE__*/React.createElement(Fragment, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 6\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-danger py-1 px-2 ml-2\",\n          onClick: function onClick() {\n            return deleteCategoryHandler(author._id);\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 7\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"fa fa-trash\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 8\n          }\n        })))\n      });\n    });\n    return data;\n  };\n  var deleteCategoryHandler = function deleteCategoryHandler(id) {\n    dispatch(dltAuthor(id));\n  };\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-md-2 mt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-md-10 mt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"my-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, \"All Authors\"), loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 8\n    }\n  }) : /*#__PURE__*/React.createElement(MDBDataTable, {\n    data: setAuthors(),\n    className: \"px-3\",\n    bordered: true,\n    striped: true,\n    hover: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 8\n    }\n  })))));\n};\nexport default ListAuthors;","map":{"version":3,"names":["React","Fragment","useEffect","MDBDataTable","useNavigate","useDispatch","useSelector","Sidebar","Loader","dltAuthor","fetchAuthors","DELETE_AUTHOR_RESET","clearErrors","ListAuthors","history","dispatch","authorsList","state","authors","loading","error","deleteError","isDeleted","alert","success","type","setAuthors","data","columns","label","field","sort","rows","forEach","author","push","id","_id","name","year","actions","deleteCategoryHandler"],"sources":["D:/DAChuyenNganh/Libraly-System/MERN-libraly-online/Frontend/src/components/Authors/ListAuthors.js"],"sourcesContent":["import React, { Fragment, useEffect } from \"react\";\r\nimport { MDBDataTable } from \"mdbreact\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Sidebar from \"../admin/Sidebar\";\r\nimport Loader from \"../layout/Loader\";\r\nimport { dltAuthor, fetchAuthors } from \"../../redux/actions/author/authorActions\";\r\nimport { DELETE_AUTHOR_RESET } from \"../../redux/actions/actionsTypes\";\r\nimport { clearErrors } from \"../../redux/actions/books/bookActions\";\r\n\r\n\r\nconst ListAuthors = () => {\r\n\tconst history = useNavigate();\r\n\tconst dispatch = useDispatch();\r\n\r\n    const authorsList = useSelector(state => state.authorsList);\r\n    const { authors, loading, error } = authorsList;\r\n\tconst { error: deleteError, isDeleted } = useSelector(\r\n\t\t(state) => state.dltAuthor\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(fetchAuthors());\r\n\r\n\t\tif (error) {\r\n\t\t\talert(error);\r\n\t\t\tdispatch(clearErrors());\r\n\t\t}\r\n\r\n\t\tif (deleteError) {\r\n\t\t\talert(deleteError);\r\n\t\t\tdispatch(clearErrors());\r\n\t\t}\r\n\r\n\t\tif (isDeleted) {\r\n\t\t\talert.success(\"Author deleted successfully\");\r\n\t\t\thistory(\"/listAuthor\");\r\n\t\t\tdispatch({ type: DELETE_AUTHOR_RESET });\r\n\t\t}\r\n\t}, [dispatch, alert, error, deleteError, isDeleted, history]);\r\n\r\n\tconst setAuthors = () => {\r\n\t\tconst data = {\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"ID\",\r\n\t\t\t\t\tfield: \"id\",\r\n\t\t\t\t\tsort: \"asc\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"Name\",\r\n\t\t\t\t\tfield: \"name\",\r\n\t\t\t\t\tsort: \"asc\",\r\n\t\t\t\t},\r\n                {\r\n\t\t\t\t\tlabel: \"Year\",\r\n\t\t\t\t\tfield: \"year\",\r\n\t\t\t\t\tsort: \"asc\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel: \"Action\",\r\n\t\t\t\t\tfield: \"actions\",\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\trows: [],\r\n\t\t};\r\n\r\n\t\tauthors.forEach((author) => {\r\n\t\t\tdata.rows.push({\r\n\t\t\t\tid: author._id,\r\n\t\t\t\tname: author.name,\r\n\t\t\t\tyear: author.year,\r\n\r\n\t\t\t\tactions: (\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName=\"btn btn-danger py-1 px-2 ml-2\"\r\n\t\t\t\t\t\t\tonClick={() => deleteCategoryHandler(author._id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<i className=\"fa fa-trash\"></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t),\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t};\r\n\r\n\tconst deleteCategoryHandler = (id) => {\r\n\t\tdispatch(dltAuthor(id));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<div className=\"row mt-5\">\r\n\t\t\t\t<div className=\"col-12 col-md-2 mt-4\">\r\n\t\t\t\t\t<Sidebar />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"col-12 col-md-10 mt-5\">\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t<h1 className=\"my-5\">All Authors</h1>\r\n\r\n\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t<Loader />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<MDBDataTable\r\n\t\t\t\t\t\t\t\tdata={setAuthors()}\r\n\t\t\t\t\t\t\t\tclassName=\"px-3\"\r\n\t\t\t\t\t\t\t\tbordered\r\n\t\t\t\t\t\t\t\tstriped\r\n\t\t\t\t\t\t\t\thover\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nexport default ListAuthors;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}